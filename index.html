<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AJK Cleaning Company | Professional Cleaning Services in Bischofsheim</title>
  
  <!-- SEO OPTIMIZATION: Enhanced meta tags for better search engine visibility -->
  <meta name="description" content="AJK Cleaning Company: Professional residential & commercial cleaning services in Bischofsheim. Eco-friendly products, fully insured, satisfaction guaranteed. Free quotes!">
  <meta name="keywords" content="cleaning service, Bischofsheim, residential cleaning, commercial cleaning, eco-friendly cleaning, move-in cleaning, deep cleaning, office cleaning mainz, house cleaning wiesbaden">
  <meta name="author" content="AJK Cleaning Company">
  <meta name="robots" content="index, follow">
  
  <!-- SEO OPTIMIZATION: Geo-specific meta tags for local search -->
  <meta name="geo.region" content="DE-HE">
  <meta name="geo.placename" content="Bischofsheim">
  <meta name="geo.position" content="49.9939;8.3669">

  <!-- SECURITY FIX: Updated Content-Security-Policy to only allow connections to our own server (self) and WebSocket (ws: wss:). The direct Google API endpoint has been removed. -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdn.tailwindcss.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com; img-src 'self' data: https://placehold.co https://images.unsplash.com; font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com; connect-src 'self' ws: wss:;">

  <!-- PERFORMANCE: Preload critical resources -->
  <link rel="preload" as="image" href="https://images.unsplash.com/photo-1581578731548-c64695cc6952?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <!-- Open Graph tags for social media sharing -->
  <meta property="og:title" content="AJK Cleaning Company | Professional Cleaning Services in Bischofsheim">
  <meta property="og:description" content="Top-rated, eco-friendly cleaning for homes and businesses in Bischofsheim. Get your free quote today!">
  <meta property="og:image" content="https://images.unsplash.com/photo-1581578731548-c64695cc6952?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80">
  <meta property="og:url" content="https://www.ajkcleaning.com">
  <meta property="og:type" content="website">
  <meta property="og:locale" content="en_DE">
  
  <!-- Twitter Card data -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="AJK Cleaning Company | Professional Cleaning Services">
  <meta name="twitter:description" content="Top-rated, eco-friendly cleaning for homes and businesses in Bischofsheim. Get your free quote today!">
  <meta name="twitter:image" content="https://images.unsplash.com/photo-1581578731548-c64695cc6952?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80">
  
  <!-- Canonical URL -->
  <link rel="canonical" href="https://www.ajkcleaning.com">
  
  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" xintegrity="sha512-Avb2QiuDEEvB4bZJYdft2mNjVShBftLdPG8FJ0V7irTLQ8Uo0qcPxh4Plq7G5tGm0rU+1SPhVotteLpBERwTkw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Custom CSS -->
  <style>
    :root{--primary:#1e40af;--primary-dark:#1e3a8a;--secondary:#059669;--secondary-dark:#047857}
    *{scroll-behavior:smooth;box-sizing:border-box}
    body{font-family:'Inter',-apple-system,BlinkMacSystemFont,sans-serif;line-height:1.6;color:#374151}
    .navbar-scrolled{box-shadow:0 4px 18px rgba(0,0,0,.1);backdrop-filter:blur(12px);background:hsla(0,0%,100%,.97);transform:translateY(0)}
    .nav-link{position:relative;padding:.5rem 0;transition:all .3s ease;font-weight:500}
    .nav-link::after{content:'';position:absolute;width:0;height:2px;bottom:0;left:0;background-color:var(--primary);transition:width .3s ease}
    .nav-link:hover::after,.nav-link.active::after{width:100%}
    .mobile-menu{transition:all .4s cubic-bezier(.68,-.55,.27,1.55);transform-origin:top;opacity:0;transform:scaleY(0) translateY(-20px);display:none}
    .mobile-menu.open{display:flex;opacity:1;transform:scaleY(1) translateY(0)}
    .cta-button{position:relative;overflow:hidden;transition:all .3s ease;z-index:1}
    .cta-button::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,hsla(0,0%,100%,.2),transparent);transition:all .6s ease;z-index:-1}
    .cta-button:hover::before{left:100%}
    .menu-line{transition:all .3s ease}
    .menu-open .menu-line:nth-child(1){transform:rotate(45deg) translate(6px,6px)}
    .menu-open .menu-line:nth-child(2){opacity:0}
    .menu-open .menu-line:nth-child(3){transform:rotate(-45deg) translate(6px,-6px)}
    .hero-overlay{background:linear-gradient(135deg,rgba(10,25,47,.7),rgba(10,25,47,.5))}
    .service-card,.trust-point,.faq-item{contain:layout style}
    .service-card{transition:all .4s cubic-bezier(.175,.885,.32,1.275);overflow:hidden}
    .service-card:hover{transform:translateY(-8px) scale(1.02);box-shadow:0 20px 40px rgba(0,0,0,.1)}
    .form-input:invalid{border-color:#f87171}
    .form-input:valid{border-color:#34d399}
    @keyframes fadeInUp{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}
    .animate-fade-in-up{animation:fadeInUp .8s ease-out forwards; opacity: 0;}
    .trust-point{background:#f8fafc;border-left:4px solid var(--primary);transition:all .3s ease}
    .trust-point:hover{background:#f1f5f9;transform:translateX(5px)}
    .skip-link{position:absolute;top:-40px;left:6px;background:#000;color:#fff;padding:8px;z-index:10000;text-decoration:none}
    .skip-link:focus{top:6px}
    @media (prefers-reduced-motion:reduce){*{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important;scroll-behavior:auto!important}}
    a:focus-visible,button:focus-visible,input:focus-visible,textarea:focus-visible,select:focus-visible{outline:2px solid var(--primary);outline-offset:2px}
    .text-blue-200{color:#bfdbfe}
    .sticky-cta{padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom);z-index:50}
    .hero-image{background-image:url(https://images.unsplash.com/photo-1581578731548-c64695cc6952?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80);background-size:cover;background-position:center;background-attachment:fixed}
    .faq-question{cursor:pointer}
    .faq-answer{max-height:0;overflow:hidden;transition:max-height .5s ease-in-out; contain: content;}
    .faq-item.open .faq-answer{max-height:300px}
    .faq-item.open .faq-icon{transform:rotate(180deg)}
    .faq-icon{transition:transform .3s ease}
    .chat-widget-enhanced{position:fixed;bottom:20px;right:20px;z-index:1000;font-family:'Inter',-apple-system,BlinkMacSystemFont,sans-serif}
    .chat-toggle{position:relative;width:60px;height:60px;background:#1e40af;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 4px 12px rgba(0,0,0,.15);transition:all .3s ease;color:#fff}
    .chat-toggle:hover{background:#1e3a8a;transform:scale(1.05)}
    .connection-indicator{position:absolute;top:4px;right:4px;width:12px;height:12px;border-radius:50%;background:#ef4444;border:2px solid #fff;transition:all .3s ease}
    .connection-indicator.connected{background:#10b981}
    .unread-badge{position:absolute;top:-5px;right:-5px;background:#ef4444;color:#fff;border-radius:50%;min-width:20px;height:20px;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:700;border:2px solid #fff}
    .chat-window{position:absolute;bottom:75px;right:0;width:350px;height:450px;background:#fff;border-radius:12px;box-shadow:0 8px 30px rgba(0,0,0,.2);overflow:hidden;display:flex;flex-direction:column;transform:translateY(20px) scale(.9);opacity:0;transition:all .3s cubic-bezier(.68,-.55,.265,1.55);display:none}
    .chat-window.open{transform:translateY(0) scale(1);opacity:1;display:flex}
    .chat-header{background:#1e40af;color:#fff;padding:15px;display:flex;justify-content:space-between;align-items:center}
    .chat-header h3{margin:0;font-size:16px;font-weight:600}
    .chat-status{font-size:12px;opacity:.9}
    .chat-header-actions{display:flex;gap:5px}
    .minimize-btn,.close-btn{background:hsla(0,0%,100%,.2);border:none;color:#fff;width:28px;height:28px;border-radius:4px;cursor:pointer;font-size:16px;display:flex;align-items:center;justify-content:center;transition:background .2s}
    .minimize-btn:hover,.close-btn:hover{background:hsla(0,0%,100%,.3)}
    .chat-messages{flex:1;padding:15px;overflow-y:auto;background:#f8fafc}
    .message{margin-bottom:15px;animation:messageSlide .3s ease-out}
    @keyframes messageSlide{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
    .message-content{max-width:85%;padding:10px 15px;border-radius:18px;word-wrap:break-word;line-height:1.4}
    .user-message .message-content{background:#1e40af;color:#fff;margin-left:auto;border-bottom-right-radius:4px}
    .admin-message .message-content{background:#fff;color:#374151;border:1px solid #e5e7eb;border-bottom-left-radius:4px}
    .system-message .message-content{background:#f3f4f6;color:#6b7280;margin:0 auto;text-align:center;border-radius:12px;font-size:14px}
    .message-time{font-size:11px;color:#9ca3af;margin-top:5px;text-align:right}
    .user-message .message-time{text-align:right}
    .admin-message .message-time{text-align:left}
    .typing-indicator{padding:15px;background:#fff;border-top:1px solid #e5e7eb;display:flex;align-items:center;gap:10px;display:none}
    .typing-dots{display:flex;gap:3px}
    .typing-dots span{width:6px;height:6px;border-radius:50%;background:#9ca3af;animation:typingDot 1.4s infinite ease-in-out}
    .typing-dots span:nth-child(1){animation-delay:-.32s}
    .typing-dots span:nth-child(2){animation-delay:-.16s}
    @keyframes typingDot{0%,80%,100%{transform:scale(0);opacity:.5}40%{transform:scale(1);opacity:1}}
    .typing-text{font-size:12px;color:#6b7280}
    .chat-input-container{background:#fff;border-top:1px solid #e5e7eb}
    .user-info{padding:15px;display:flex;flex-direction:column;gap:10px;display:none}
    .user-info input{border:1px solid #d1d5db;border-radius:8px;padding:8px 12px;font-size:14px}
    .user-info input:focus{outline:none;border-color:#1e40af;box-shadow:0 0 0 3px rgba(30,64,175,.1)}
    .user-info button{background:#1e40af;color:#fff;border:none;border-radius:8px;padding:10px;cursor:pointer;font-weight:600;transition:background .2s}
    .user-info button:hover{background:#1e3a8a}
    .chat-input-area{display:flex;padding:15px;gap:10px;align-items:flex-end}
    #chat-input-enhanced{flex:1;border:1px solid #d1d5db;border-radius:20px;padding:10px 15px;font-size:14px;resize:none;max-height:100px;min-height:40px}
    #chat-input-enhanced:focus{outline:none;border-color:#1e40af;box-shadow:0 0 0 3px rgba(30,64,175,.1)}
    #chat-send-enhanced{background:#1e40af;color:#fff;border:none;border-radius:50%;width:40px;height:40px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s}
    #chat-send-enhanced:hover:not(:disabled){background:#1e3a8a;transform:scale(1.05)}
    #chat-send-enhanced:disabled{background:#9ca3af;cursor:not-allowed;transform:none}
    @media (max-width:768px){.chat-widget-enhanced{bottom:90px!important;right:15px;z-index:60}.chat-window{width:calc(100vw - 30px)!important;right:-15px!important;height:400px;bottom:75px!important}.chat-toggle{width:55px;height:55px}}
    .chat-messages::-webkit-scrollbar{width:6px}
    .chat-messages::-webkit-scrollbar-track{background:#f1f5f9}
    .chat-messages::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:3px}
    .chat-messages::-webkit-scrollbar-thumb:hover{background:#94a3b8}
    
    /* Gemini Modal & Tip Generator Styles */
    #checklist-modal { transition: opacity 0.3s ease; }
    #checklist-modal-content { transition: transform 0.3s ease; }
    #checklist-modal-content h3 { font-size: 1.25rem; font-weight: 600; margin-bottom: 1rem; color: var(--primary); }
    #checklist-modal-content ul { list-style-type: disc; margin-left: 1.5rem; }
    #checklist-modal-content li { margin-bottom: 0.5rem; }
    @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
    .loader { border: 4px solid #f3f3f3; border-top: 4px solid var(--primary); border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; }
    #tip-result-container { transition: opacity 0.3s ease; }
  </style>

  <!-- SEO OPTIMIZATION: Enhanced JSON-LD Schema for Local Business -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "CleaningService",
    "name": "AJK Cleaning Company",
    "description": "Professional residential & commercial cleaning services in Bischofsheim. Eco-friendly products, fully insured, satisfaction guaranteed.",
    "url": "https://www.ajkcleaning.com",
    "logo": "https://www.ajkcleaning.com/images/logo.jpg",
    "image": "https://images.unsplash.com/photo-1581578731548-c64695cc6952?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80",
    "telephone": "+4917661852286",
    "email": "rajau691@gmail.com",
    "address": {
      "@type": "PostalAddress",
      "streetAddress": "Bahnhofstraße 5",
      "addressLocality": "Bischofsheim",
      "postalCode": "65474",
      "addressCountry": "DE"
    },
    "geo": {
      "@type": "GeoCoordinates",
      "latitude": 49.9939,
      "longitude": 8.3669
    },
    "openingHoursSpecification": [{
      "@type": "OpeningHoursSpecification",
      "dayOfWeek": ["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],
      "opens": "08:00",
      "closes": "18:00"
    }],
    "areaServed": {
      "@type": "GeoCircle",
      "geoMidpoint": {
        "@type": "GeoCoordinates",
        "latitude": 49.9939,
        "longitude": 8.3669
      },
      "geoRadius": "25000"
    },
    "priceRange": "€€",
    "hasOfferCatalog": {
      "@type": "OfferCatalog",
      "name": "Cleaning Services",
      "itemListElement": [
        {"@type": "Offer","itemOffered": {"@type": "Service","name": "Residential Cleaning"}},
        {"@type": "Offer","itemOffered": {"@type": "Service","name": "Commercial Cleaning"}},
        {"@type": "Offer","itemOffered": {"@type": "Service","name": "Deep Cleaning"}},
        {"@type": "Offer","itemOffered": {"@type": "Service","name": "Move-In/Move-Out Cleaning"}}
      ]
    },
    "aggregateRating": {
      "@type": "AggregateRating",
      "ratingValue": "4.9",
      "reviewCount": "58"
    }
  }
  </script>
</head>
<body class="font-sans text-gray-800 antialiased">
  <!-- ACCESSIBILITY: Skip to main content link -->
  <a href="#main-content" class="skip-link">Skip to main content</a>

  <!-- Enhanced Navbar -->
  <header id="navbar" class="fixed w-full bg-white/90 z-50 transition-all duration-500 py-3">
    <div class="container mx-auto flex justify-between items-center px-6">
      <a href="#home" class="flex items-center space-x-3" aria-label="AJK Cleaning Company Home">
        <img src="images/logo.jpg" alt="AJK Cleaning Company Logo" class="h-16 w-16 sm:h-20 sm:w-20 rounded-lg logo transition-transform duration-300 object-contain" width="80" height="80" loading="eager">
        <span class="font-bold text-lg sm:text-xl text-primary transition-all duration-300">AJK Cleaning Company</span>
      </a>
      
      <nav class="hidden md:flex space-x-8 items-center" aria-label="Main navigation">
        <a href="#home" class="nav-link text-gray-700 hover:text-primary font-medium active" aria-current="page">Home</a>
        <a href="#services" class="nav-link text-gray-700 hover:text-primary font-medium">Services</a>
        <a href="#about" class="nav-link text-gray-700 hover:text-primary font-medium">About</a>
        <a href="#faq" class="nav-link text-gray-700 hover:text-primary font-medium">FAQ</a>
        <a href="#contact" class="nav-link text-gray-700 hover:text-primary font-medium">Contact</a>
        <a href="#contact" class="cta-button bg-gradient-to-r from-primary to-primary-dark text-white px-5 py-2.5 rounded-lg shadow-md hover:shadow-lg hover:from-primary-dark hover:to-primary-dark transition-all duration-300 font-semibold">GET A FREE QUOTE</a>
      </nav>
      
      <button id="menu-btn" type="button" class="md:hidden flex flex-col w-8 h-8 justify-center items-center space-y-1.5 focus:outline-none" aria-label="Toggle menu" aria-expanded="false" aria-controls="mobile-menu">
        <span class="menu-line block w-6 h-0.5 bg-primary"></span>
        <span class="menu-line block w-6 h-0.5 bg-primary"></span>
        <span class="menu-line block w-6 h-0.5 bg-primary"></span>
      </button>
    </div>
    
    <div id="mobile-menu" class="mobile-menu flex-col bg-white px-6 pb-6 space-y-3 md:hidden border-t shadow-lg" aria-hidden="true">
      <a href="#home" class="block py-3 px-4 rounded-lg hover:bg-blue-50 text-gray-700 hover:text-primary transition-colors duration-300 font-medium active" aria-current="page">Home</a>
      <a href="#services" class="block py-3 px-4 rounded-lg hover:bg-blue-50 text-gray-700 hover:text-primary transition-colors duration-300 font-medium">Services</a>
      <a href="#about" class="block py-3 px-4 rounded-lg hover:bg-blue-50 text-gray-700 hover:text-primary transition-colors duration-300 font-medium">About</a>
      <a href="#faq" class="block py-3 px-4 rounded-lg hover:bg-blue-50 text-gray-700 hover:text-primary transition-colors duration-300 font-medium">FAQ</a>
      <a href="#contact" class="block py-3 px-4 rounded-lg hover:bg-blue-50 text-gray-700 hover:text-primary transition-colors duration-300 font-medium">Contact</a>
      <a href="#contact" class="cta-button block bg-gradient-to-r from-primary to-primary-dark text-white px-4 py-3 rounded-lg text-center hover:shadow-md transition-colors duration-300 mt-2 font-semibold">GET A FREE QUOTE</a>
    </div>
  </header>

  <main>
    <!-- Hero Section -->
    <section id="home" class="relative h-screen flex items-center justify-center text-center text-white pt-16 hero-image" role="banner" aria-labelledby="hero-heading">
      <div class="hero-overlay absolute inset-0"></div>
      <!-- ACCESSIBILITY: Added main content ID for skip link -->
      <div id="main-content" class="relative z-10 max-w-4xl px-6 animate-fade-in-up">
        <h1 id="hero-heading" class="text-4xl md:text-6xl font-bold mb-4 leading-tight">Experience the AJK Standard of Clean in Bischofsheim</h1>
        <p class="mb-8 text-lg md:text-xl">Fully insured, eco-friendly products, and satisfaction guaranteed. Serving Bischofsheim, Mainz, Wiesbaden & surrounding areas.</p>
        <div class="flex flex-col sm:flex-row justify-center gap-4">
          <a href="#contact" class="bg-primary text-white px-6 py-3 rounded-lg shadow hover:bg-primary-dark transition-colors duration-300 font-semibold">Book a Cleaning</a>
          <a href="#services" class="bg-transparent border-2 border-white text-white px-6 py-3 rounded-lg shadow hover:bg-white hover:text-primary transition-colors duration-300 font-semibold">Our Services</a>
        </div>
      </div>
      <a href="#trust" class="absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce" aria-label="Scroll to next section">
        <i class="fas fa-chevron-down text-2xl text-white"></i>
      </a>
    </section>

    <!-- NEW CONTENT: Trust Badges Section -->
    <section id="trust" class="py-12 bg-white">
      <div class="container mx-auto px-6 text-center">
        <div class="grid grid-cols-2 md:grid-cols-4 gap-8">
            <div class="flex flex-col items-center text-gray-700 animate-fade-in-up" style="animation-delay: 0.1s;">
                <i class="fas fa-shield-alt text-4xl text-primary mb-2"></i>
                <span class="font-semibold">Insured & Bonded</span>
            </div>
            <div class="flex flex-col items-center text-gray-700 animate-fade-in-up" style="animation-delay: 0.2s;">
                <i class="fas fa-leaf text-4xl text-secondary mb-2"></i>
                <span class="font-semibold">Eco-Friendly</span>
            </div>
            <div class="flex flex-col items-center text-gray-700 animate-fade-in-up" style="animation-delay: 0.3s;">
                <i class="fas fa-star text-4xl text-yellow-400 mb-2"></i>
                <span class="font-semibold">5-Star Rated</span>
            </div>
            <div class="flex flex-col items-center text-gray-700 animate-fade-in-up" style="animation-delay: 0.4s;">
                <i class="fas fa-thumbs-up text-4xl text-primary mb-2"></i>
                <span class="font-semibold">Satisfaction Guaranteed</span>
            </div>
        </div>
      </div>
    </section>
    
    <!-- Services Section -->
    <section id="services" class="py-16 bg-gray-50" aria-labelledby="services-heading">
      <div class="container mx-auto px-6 text-center">
        <h2 id="services-heading" class="text-3xl font-bold text-primary mb-4 animate-fade-in-up">Our Premium Cleaning Services</h2>
        <p class="text-gray-600 max-w-2xl mx-auto mb-12 animate-fade-in-up" style="animation-delay: 0.2s;">We offer a wide range of cleaning services tailored to meet your specific needs and exceed your expectations in Bischofsheim and surrounding areas.</p>
        <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
          <article class="service-card bg-white p-6 rounded-xl shadow-md relative animate-fade-in-up flex flex-col justify-between" style="animation-delay: 0.3s;">
            <div>
              <div class="bg-gradient-to-br from-blue-100 to-blue-200 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4" aria-hidden="true"><i class="fas fa-home text-primary text-2xl"></i></div>
              <h3 class="font-bold text-lg mb-2">Residential Cleaning</h3>
              <p class="text-sm text-gray-600 mb-4">Keep your home spotless with our detailed cleaning services.</p>
            </div>
            <div class="mt-4">
              <a href="#contact" class="text-primary hover:underline font-medium inline-flex items-center mb-3">Learn More <i class="fas fa-arrow-right ml-2 text-xs" aria-hidden="true"></i></a>
              <button class="get-checklist-btn w-full bg-blue-100 text-primary font-semibold py-2 px-4 rounded-lg hover:bg-blue-200 transition-colors">✨ Get Cleaning Checklist</button>
            </div>
          </article>
          <article class="service-card bg-white p-6 rounded-xl shadow-md relative animate-fade-in-up flex flex-col justify-between" style="animation-delay: 0.4s;">
            <div>
              <div class="bg-gradient-to-br from-blue-100 to-blue-200 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4" aria-hidden="true"><i class="fas fa-building text-primary text-2xl"></i></div>
              <h3 class="font-bold text-lg mb-2">Commercial Cleaning</h3>
              <p class="text-sm text-gray-600 mb-4">Reliable cleaning for offices and businesses of all sizes.</p>
            </div>
            <div class="mt-4">
              <a href="#contact" class="text-primary hover:underline font-medium inline-flex items-center mb-3">Learn More <i class="fas fa-arrow-right ml-2 text-xs" aria-hidden="true"></i></a>
              <button class="get-checklist-btn w-full bg-blue-100 text-primary font-semibold py-2 px-4 rounded-lg hover:bg-blue-200 transition-colors">✨ Get Cleaning Checklist</button>
            </div>
          </article>
          <article class="service-card bg-white p-6 rounded-xl shadow-md relative animate-fade-in-up flex flex-col justify-between" style="animation-delay: 0.5s;">
            <div>
              <div class="bg-gradient-to-br from-blue-100 to-blue-200 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4" aria-hidden="true"><i class="fas fa-broom text-primary text-2xl"></i></div>
              <h3 class="font-bold text-lg mb-2">Deep Cleaning</h3>
              <p class="text-sm text-gray-600 mb-4">Thorough cleaning for a refreshed and healthy space.</p>
            </div>
            <div class="mt-4">
              <a href="#contact" class="text-primary hover:underline font-medium inline-flex items-center mb-3">Learn More <i class="fas fa-arrow-right ml-2 text-xs" aria-hidden="true"></i></a>
              <button class="get-checklist-btn w-full bg-blue-100 text-primary font-semibold py-2 px-4 rounded-lg hover:bg-blue-200 transition-colors">✨ Get Cleaning Checklist</button>
            </div>
          </article>
          <article class="service-card bg-white p-6 rounded-xl shadow-md relative animate-fade-in-up flex flex-col justify-between" style="animation-delay: 0.6s;">
            <div>
              <div class="bg-gradient-to-br from-blue-100 to-blue-200 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4" aria-hidden="true"><i class="fas fa-truck-moving text-primary text-2xl"></i></div>
              <h3 class="font-bold text-lg mb-2">Move-In/Move-Out</h3>
              <p class="text-sm text-gray-600 mb-4">Start fresh in your new place with our moving cleaning.</p>
            </div>
            <div class="mt-4">
              <a href="#contact" class="text-primary hover:underline font-medium inline-flex items-center mb-3">Learn More <i class="fas fa-arrow-right ml-2 text-xs" aria-hidden="true"></i></a>
              <button class="get-checklist-btn w-full bg-blue-100 text-primary font-semibold py-2 px-4 rounded-lg hover:bg-blue-200 transition-colors">✨ Get Cleaning Checklist</button>
            </div>
          </article>
        </div>
      </div>
    </section>

    <!-- About Section -->
    <section id="about" class="py-16 bg-white" aria-labelledby="about-heading">
        <div class="container mx-auto px-6">
            <div class="grid md:grid-cols-2 gap-12 items-center">
                <div>
                    <h2 id="about-heading" class="text-3xl font-bold text-primary mb-4 animate-fade-in-up">About AJK Cleaning Company</h2>
                    <p class="mb-6 text-gray-700 animate-fade-in-up" style="animation-delay: 0.2s;">At AJK Cleaning Company, we are dedicated to providing premium cleaning services with a commitment to quality and community. Our team uses eco-friendly products and ensures every job meets our AJK standard of clean.</p>
                    <p class="mb-6 text-gray-700 animate-fade-in-up" style="animation-delay: 0.3s;">Founded in 2022, we've grown to become one of the most trusted cleaning services in the Bischofsheim area, serving hundreds of satisfied residential and commercial clients.</p>
                    <div class="space-y-4 mt-8">
                        <div class="trust-point p-4 rounded-lg flex items-center animate-fade-in-up" style="animation-delay: 0.4s;"><i class="fas fa-shield-alt text-primary text-xl w-8 text-center" aria-hidden="true"></i><span class="font-medium text-gray-700 ml-3">Fully Insured & Bonded</span></div>
                        <div class="trust-point p-4 rounded-lg flex items-center animate-fade-in-up" style="animation-delay: 0.5s;"><i class="fas fa-leaf text-green-600 text-xl w-8 text-center" aria-hidden="true"></i><span class="font-medium text-gray-700 ml-3">Eco-Friendly Products</span></div>
                        <div class="trust-point p-4 rounded-lg flex items-center animate-fade-in-up" style="animation-delay: 0.6s;"><i class="fas fa-user-check text-primary text-xl w-8 text-center" aria-hidden="true"></i><span class="font-medium text-gray-700 ml-3">Trained Professionals</span></div>
                        <div class="trust-point p-4 rounded-lg flex items-center animate-fade-in-up" style="animation-delay: 0.7s;"><i class="fas fa-thumbs-up text-green-600 text-xl w-8 text-center" aria-hidden="true"></i><span class="font-medium text-gray-700 ml-3">Satisfaction Guaranteed</span></div>
                    </div>
                </div>
                <div class="animate-fade-in-up" style="animation-delay: 0.8s;">
                    <img src="https://images.unsplash.com/photo-1606813907291-d86efa9b94db?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" alt="Professional cleaning team working together" class="rounded-xl shadow-lg" width="600" height="400" loading="lazy">
                </div>
            </div>
        </div>
    </section>

    <!-- NEW CONTENT: FAQ Section -->
    <section id="faq" class="py-16 bg-gray-50" aria-labelledby="faq-heading">
        <div class="container mx-auto px-6">
            <div class="text-center max-w-3xl mx-auto">
                <h2 id="faq-heading" class="text-3xl font-bold text-primary mb-4 animate-fade-in-up">Frequently Asked Questions</h2>
                <p class="text-gray-600 mb-12 animate-fade-in-up" style="animation-delay: 0.2s;">Have questions? We have answers. Here are some common queries we receive from our clients in the Bischofsheim area.</p>
            </div>
            <div class="max-w-3xl mx-auto space-y-4" id="faq-container">
                <!-- FAQ items will be inserted here by JavaScript -->
            </div>
        </div>
    </section>
    
    <!-- NEW: AI Cleaning Tip Generator Section -->
    <section id="ai-tips" class="py-16 bg-white" aria-labelledby="tip-heading">
        <div class="container mx-auto px-6">
            <div class="bg-gray-50 p-8 rounded-xl shadow-lg border border-gray-100 text-center max-w-3xl mx-auto">
                <h2 id="tip-heading" class="text-3xl font-bold text-primary mb-4 animate-fade-in-up">✨ Get a Custom Cleaning Tip</h2>
                <p class="text-gray-600 mb-6 animate-fade-in-up" style="animation-delay: 0.2s;">Stuck on a tough cleaning problem? Let our AI expert help you out!</p>
                <div class="grid sm:grid-cols-2 gap-4 mb-4 animate-fade-in-up" style="animation-delay: 0.3s;">
                    <div>
                        <label for="tip-room" class="sr-only">Select a Room</label>
                        <select id="tip-room" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                            <option>Kitchen</option>
                            <option>Bathroom</option>
                            <option>Living Room</option>
                            <option>Bedroom</option>
                        </select>
                    </div>
                    <div>
                        <label for="tip-challenge" class="sr-only">Select a Challenge</label>
                        <select id="tip-challenge" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                            <option>Everyday Grime</option>
                            <option>Tough Grease</option>
                            <option>Limescale & Hard Water</option>
                            <option>Dust & Allergens</option>
                            <option>Pet Messes</option>
                        </select>
                    </div>
                </div>
                <button id="generate-tip-btn" class="bg-secondary text-white px-6 py-3 rounded-lg shadow hover:bg-secondary-dark transition-colors duration-300 font-semibold w-full sm:w-auto animate-fade-in-up" style="animation-delay: 0.4s;">
                    Generate Tip
                </button>
                <div id="tip-result-container" class="mt-6 text-left p-6 bg-blue-50 rounded-lg border border-blue-200 hidden opacity-0 animate-fade-in-up">
                    <div id="tip-result-loader" class="flex justify-center items-center">
                        <div class="loader"></div>
                    </div>
                    <p id="tip-result-text" class="text-gray-800"></p>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="py-16 bg-gray-50" aria-labelledby="contact-heading">
      <div class="container mx-auto px-6 grid md:grid-cols-2 gap-12">
        <div class="animate-fade-in-up">
          <h2 id="contact-heading" class="text-3xl font-bold text-primary mb-4">Get In Touch</h2>
          <p class="mb-6 text-gray-700">We're here to answer any questions. Reach out for a free, no-obligation quote for your cleaning needs in Bischofsheim.</p>
          <div class="space-y-3">
            <p class="flex items-center"><i class="fas fa-phone text-primary mr-3 w-5" aria-hidden="true"></i> <a href="tel:+4917661852286" class="hover:underline">+49 176 61852286</a></p>
            <p class="flex items-center"><i class="fas fa-envelope text-primary mr-3 w-5" aria-hidden="true"></i> <a href="mailto:rajau691@gmail.com" class="hover:underline">rajau691@gmail.com</a></p>
            <p class="flex items-center"><i class="fas fa-map-marker-alt text-primary mr-3 w-5" aria-hidden="true"></i><a href="https://maps.app.goo.gl/95dKa1nL9D2gZ7947" target="_blank" rel="noopener noreferrer">Bahnhofstraße 5, 65474 Bischofsheim, Germany</a></p>
            <p class="flex items-center"><i class="fas fa-clock text-primary mr-3 w-5" aria-hidden="true"></i> Mon - Sat: 8:00am - 6:00pm</p>
          </div>
        </div>
        <div class="bg-white p-8 rounded-xl shadow-lg border border-gray-100 animate-fade-in-up" style="animation-delay: 0.2s;">
          <h3 class="text-2xl font-bold text-primary mb-6">Get a Free Quote</h3>
          <form id="contact-form" class="space-y-4" novalidate>
            <div>
              <label for="name" class="sr-only">Name</label>
              <input type="text" id="name" name="name" placeholder="Name *" class="form-input w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent" required aria-required="true">
            </div>
            <div>
              <label for="email" class="sr-only">Email</label>
              <input type="email" id="email" name="email" placeholder="Email *" class="form-input w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent" required aria-required="true">
            </div>
            <div>
              <label for="service" class="sr-only">Select a Service</label>
              <select id="service" name="service" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent" aria-label="Select a service">
                <option value="" disabled selected>Select a Service</option>
                <option value="Residential Cleaning">Residential Cleaning</option>
                <option value="Commercial Cleaning">Commercial Cleaning</option>
                <option value="Deep Cleaning">Deep Cleaning</option>
                <option value="Move-In/Move-Out Cleaning">Move-In/Move-Out Cleaning</option>
              </select>
            </div>
            <div>
              <label for="message" class="sr-only">Message</label>
              <textarea id="message" name="message" placeholder="Message *" rows="4" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent" required aria-required="true"></textarea>
            </div>
            <button type="submit" id="submit-btn" class="bg-secondary text-white px-6 py-3 rounded-lg shadow hover:bg-secondary-dark transition-colors duration-300 w-full font-semibold">
                <span id="submit-text">Submit Request</span>
                <span id="submit-loading" class="hidden">Sending...</span>
            </button>
            <div id="form-success" class="bg-green-100 text-green-700 p-3 rounded-lg mt-4 hidden" role="alert">Thank you! We'll be in touch soon.</div>
            <div id="form-error" class="bg-red-100 text-red-700 p-3 rounded-lg mt-4 hidden" role="alert">An error occurred. Please try again.</div>
          </form>
        </div>
      </div>
    </section>
  </main>
  
  <!-- Footer -->
  <footer class="bg-primary text-white py-12" role="contentinfo">
    <div class="container mx-auto px-6 grid md:grid-cols-4 gap-8">
      <div>
        <h4 class="font-bold text-xl mb-4">AJK Cleaning Company</h4>
        <p class="text-blue-200">Premium Cleaning Solutions for Homes and Offices in Bischofsheim</p>
      </div>
      <div>
        <h4 class="font-bold mb-4 text-lg">Quick Links</h4>
        <ul class="space-y-2">
          <li><a href="#home" class="text-blue-200 hover:text-white transition-colors">Home</a></li>
          <li><a href="#services" class="text-blue-200 hover:text-white transition-colors">Services</a></li>
          <li><a href="#about" class="text-blue-200 hover:text-white transition-colors">About</a></li>
          <li><a href="#faq" class="text-blue-200 hover:text-white transition-colors">FAQ</a></li>
          <li><a href="#contact" class="text-blue-200 hover:text-white transition-colors">Contact</a></li>
        </ul>
      </div>
      <div>
        <h4 class="font-bold mb-4 text-lg">Our Services</h4>
        <ul class="space-y-2">
          <li><a href="#services" class="text-blue-200 hover:text-white transition-colors">Residential Cleaning</a></li>
          <li><a href="#services" class="text-blue-200 hover:text-white transition-colors">Commercial Cleaning</a></li>
          <li><a href="#services" class="text-blue-200 hover:text-white transition-colors">Deep Cleaning</a></li>
        </ul>
      </div>
      <div>
        <h4 class="font-bold mb-4 text-lg">Follow Us</h4>
        <div class="flex space-x-4">
          <a href="#" class="bg-white/10 hover:bg-white/20 transition-colors w-10 h-10 rounded-full flex items-center justify-center" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
          <a href="#" class="bg-white/10 hover:bg-white/20 transition-colors w-10 h-10 rounded-full flex items-center justify-center" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
        </div>
      </div>
    </div>
    <div class="text-center mt-8 pt-6 border-t border-blue-700 text-blue-200 text-sm">
      © 2025 AJK Cleaning Company. All rights reserved.
    </div>
  </footer>

  <!-- Sticky CTA for mobile -->
  <div class="sticky-cta fixed bottom-0 left-0 right-0 bg-white shadow-lg p-3 flex justify-around items-center md:hidden z-50">
    <a href="tel:+4917661852286" class="flex items-center text-primary font-semibold px-4 py-2 text-center"><i class="fas fa-phone mr-2" aria-hidden="true"></i> Call Now</a>
    <a href="#contact" class="bg-secondary text-white px-4 py-2 rounded-lg font-semibold text-center">Get Quote</a>
  </div>
  
  <!-- Chat Widget -->
  <div id="chat-widget-enhanced" class="chat-widget-enhanced">
      <button class="chat-toggle" id="chat-toggle-enhanced" type="button" aria-label="Toggle chat">
          <div class="chat-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"/></svg>
          </div>
          <div class="connection-indicator" id="connection-indicator"></div>
          <div class="unread-badge" id="unread-badge" style="display:none;" aria-hidden="true">0</div>
      </button>
      
      <div class="chat-window" id="chat-window-enhanced">
          <div class="chat-header">
              <div class="chat-header-info">
                  <h3>AJK Cleaning Support</h3>
                  <div class="chat-status" id="chat-status">Connecting...</div>
              </div>
              <div class="chat-header-actions">
                  <button class="minimize-btn" id="minimize-chat" type="button" aria-label="Minimize chat">−</button>
                  <button class="close-btn" id="close-chat" type="button" aria-label="Close chat">×</button>
              </div>
          </div>
          
          <div class="chat-messages" id="chat-messages"></div>
          
          <div class="typing-indicator" id="typing-indicator">
              <div class="typing-dots"><span></span><span></span><span></span></div>
              <span class="typing-text">Support is typing...</span>
          </div>
          
          <div class="chat-input-container">
              <div class="user-info" id="user-info">
                  <input type="text" id="user-name" placeholder="Your name" maxlength="50" required>
                  <input type="email" id="user-email" placeholder="Your email (optional)" maxlength="100">
                  <button id="save-user-info" type="button">Start Chat</button>
              </div>
              <div class="chat-input-area" id="chat-input-area" style="display: none;">
                  <input type="text" id="chat-input-enhanced" placeholder="Type your message..." maxlength="500" aria-label="Message input">
                  <button id="chat-send-enhanced" type="button" aria-label="Send message"><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg></button>
              </div>
          </div>
      </div>
  </div>

  <!-- Gemini Checklist Modal -->
  <div id="checklist-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[2000] hidden opacity-0">
      <div id="checklist-modal-content" class="bg-white rounded-lg shadow-2xl p-6 w-full max-w-lg max-h-[90vh] flex flex-col transform scale-95">
          <div class="flex justify-between items-center border-b pb-3 mb-4">
              <h2 id="checklist-modal-title" class="text-xl font-bold text-primary">Cleaning Checklist</h2>
              <button id="checklist-modal-close" class="text-gray-500 hover:text-gray-800 text-2xl">&times;</button>
          </div>
          <div id="checklist-modal-body" class="overflow-y-auto flex-grow">
              <div id="checklist-loader" class="flex justify-center items-center py-10">
                  <div class="loader"></div>
              </div>
              <div id="checklist-content" class="hidden"></div>
              <div id="checklist-error" class="hidden text-red-600 bg-red-100 p-4 rounded-lg"></div>
          </div>
          <div class="flex justify-end items-center border-t pt-4 mt-4 space-x-3">
              <button id="checklist-modal-download" class="bg-secondary text-white font-semibold py-2 px-4 rounded-lg hover:bg-secondary-dark transition-colors hidden">Download</button>
              <button id="checklist-modal-close-bottom" class="bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-lg hover:bg-gray-300 transition-colors">Close</button>
          </div>
      </div>
  </div>
  
  <!-- Tailwind config -->
  <script>tailwind.config={theme:{extend:{colors:{primary:'#1e40af','primary-dark':'#1e3a8a',secondary:'#059669','secondary-dark':'#047857'}}}}</script>

  <!-- Full, Un-minified Custom Script -->
  <script>
    class ChatWidget {
        constructor() {
            this.ws = null;
            this.isConnected = false;
            this.isTyping = false;
            this.typingTimeout = null;
            this.reconnectInterval = null;
            this.reconnectAttempts = 0;
            this.maxReconnectAttempts = 5;
            this.unreadCount = 0;
            this.hasIdentified = false;
            this.clientId = localStorage.getItem('chatClientId') || this.generateClientId();
            this.userName = localStorage.getItem('chatUserName') || 'Guest';
            this.userEmail = localStorage.getItem('chatUserEmail') || '';
            localStorage.setItem('chatClientId', this.clientId);
            this.init();
        }
        generateClientId() {
            try {
                if (window.crypto && typeof window.crypto.randomUUID === 'function') {
                    return 'client_' + crypto.randomUUID();
                }
            } catch (e) {}
            return 'client_' + Date.now().toString(36) + Math.random().toString(36).substr(2, 9);
        }
        init() {
            this.attachEventListeners();
            this.connectWebSocket();
            this.loadSavedMessages();
            if (localStorage.getItem('chat-unread-count')) {
                this.unreadCount = parseInt(localStorage.getItem('chat-unread-count')) || 0;
                this.updateUnreadBadge();
            }
        }
        sendIdentifyMessage() {
            if (this.ws && this.ws.readyState === WebSocket.OPEN) {
                this.ws.send(JSON.stringify({
                    type: 'identify',
                    name: this.userName,
                    email: this.userEmail,
                    isAdmin: false,
                    clientId: this.clientId
                }));
                this.hasIdentified = true;
            }
        }
        attachEventListeners() {
            document.getElementById('chat-toggle-enhanced').addEventListener('click', (e) => {
                e.stopPropagation();
                this.toggleChat();
            });
            document.getElementById('close-chat').addEventListener('click', () => this.closeChat());
            document.getElementById('minimize-chat').addEventListener('click', () => this.minimizeChat());
            document.getElementById('chat-send-enhanced').addEventListener('click', () => this.sendMessage());
            document.getElementById('save-user-info').addEventListener('click', () => this.saveUserInfoForm());
            const chatInput = document.getElementById('chat-input-enhanced');
            chatInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    this.sendMessage();
                }
            });
            chatInput.addEventListener('input', () => this.handleTyping());
            document.addEventListener('click', (e) => {
                if (!e.target.closest('#chat-widget-enhanced') && document.getElementById('chat-window-enhanced').classList.contains('open')) {
                    this.closeChat();
                }
            });
        }
        connectWebSocket() {
            try {
                const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';
                const wsUrl = `${protocol}//${window.location.host}?clientId=${encodeURIComponent(this.clientId)}`;
                console.log('Attempting WebSocket connection to:', wsUrl);
                this.ws = new WebSocket(wsUrl);
                this.ws.onopen = () => {
                    console.log('WebSocket connected successfully');
                    this.isConnected = true;
                    this.reconnectAttempts = 0;
                    this.updateConnectionStatus();
                    this.enableChatInput();
                };
                this.ws.onmessage = (event) => {
                    try {
                        const data = JSON.parse(event.data);
                        this.handleServerMessage(data);
                    } catch (error) {
                        console.error('Error parsing WebSocket message:', error);
                    }
                };
                this.ws.onclose = (event) => {
                    console.log('WebSocket connection closed:', event.code, event.reason);
                    this.isConnected = false;
                    this.updateConnectionStatus();
                    this.disableChatInput();
                    this.attemptReconnect();
                };
                this.ws.onerror = (error) => {
                    console.error('WebSocket error:', error);
                    this.isConnected = false;
                    this.updateConnectionStatus('Connection error');
                };
            } catch (error) {
                console.error('Failed to create WebSocket connection:', error);
            }
        }
        attemptReconnect() {
            if (this.reconnectAttempts < this.maxReconnectAttempts) {
                this.reconnectAttempts++;
                const delay = Math.min(1000 * Math.pow(2, this.reconnectAttempts), 10000);
                console.log(`Attempting to reconnect (${this.reconnectAttempts}/${this.maxReconnectAttempts}) in ${delay/1000}s...`);
                this.updateConnectionStatus(`Reconnecting in ${delay/1000}s...`);
                setTimeout(() => {
                    if (!this.isConnected) {
                        this.connectWebSocket();
                    }
                }, delay);
            } else {
                console.log('Max reconnection attempts reached');
                this.updateConnectionStatus('Disconnected');
            }
        }
        updateConnectionStatus(customStatus = null) {
            const indicator = document.getElementById('connection-indicator');
            const status = document.getElementById('chat-status');
            if (!indicator || !status) return;
            if (customStatus) {
                status.textContent = customStatus;
                indicator.classList.remove('connected');
                return;
            }
            if (this.isConnected) {
                status.textContent = 'Online';
                indicator.classList.add('connected');
            } else {
                status.textContent = 'Connecting...';
                indicator.classList.remove('connected');
            }
        }
        enableChatInput() {
            document.getElementById('chat-input-enhanced').disabled = false;
            document.getElementById('chat-input-enhanced').placeholder = 'Type your message...';
            document.getElementById('chat-send-enhanced').disabled = false;
        }
        disableChatInput() {
            document.getElementById('chat-input-enhanced').disabled = true;
            document.getElementById('chat-input-enhanced').placeholder = 'Connecting to chat...';
            document.getElementById('chat-send-enhanced').disabled = true;
        }
        handleServerMessage(data) {
            console.log('Received server message:', data);
            switch (data.type) {
                case 'chat':
                    if (data.isAdmin || data.clientId !== this.clientId) {
                        const messageText = data.message || data.text;
                        const messageType = data.isAdmin ? 'admin' : 'user';
                        this.displayMessage(messageText, messageType, data.name || (data.isAdmin ? 'Support' : 'Guest'), data.timestamp);
                        this.saveMessageToStorage({
                            text: messageText,
                            type: messageType,
                            sender: data.name || (data.isAdmin ? 'Support' : 'Guest'),
                            timestamp: data.timestamp || new Date().toISOString()
                        });
                        if (data.isAdmin) {
                            this.playNotificationSound();
                            this.incrementUnreadCount();
                        }
                    }
                    break;
                case 'system':
                    this.displayMessage(data.message, 'system', 'System', data.timestamp);
                    break;
                case 'history':
                    if (data.messages && Array.isArray(data.messages)) {
                        const messagesContainer = document.getElementById('chat-messages');
                        if (messagesContainer) {
                            messagesContainer.innerHTML = '';
                        }
                        try {
                            localStorage.setItem('chatMessages', '[]');
                        } catch (e) {}
                        data.messages.forEach(msg => {
                            const messageText = msg.message || msg.text;
                            const messageType = msg.type === 'system' ? 'system' : (msg.isAdmin ? 'admin' : 'user');
                            this.displayMessage(messageText, messageType, msg.name || (msg.isAdmin ? 'Support' : 'Guest'), msg.timestamp);
                            this.saveMessageToStorage({
                                text: messageText,
                                type: messageType,
                                sender: msg.name || (msg.isAdmin ? 'Support' : 'Guest'),
                                timestamp: msg.timestamp
                            });
                        });
                    }
                    break;
                case 'typing':
                    if (data.clientId !== this.clientId) {
                        this.showTypingIndicator(data.isTyping, data.name);
                    }
                    break;
                case 'chat_reset':
                    this.handleChatReset();
                    break;
            }
        }
        saveMessageToStorage(message) {
            try {
                const storedMessages = JSON.parse(localStorage.getItem('chatMessages') || '[]');
                storedMessages.push(message);
                if (storedMessages.length > 100) {
                    storedMessages.splice(0, storedMessages.length - 100);
                }
                localStorage.setItem('chatMessages', JSON.stringify(storedMessages));
            } catch (error) {
                console.error('Error saving message to storage:', error);
            }
        }
        loadSavedMessages() {
            try {
                const storedMessages = JSON.parse(localStorage.getItem('chatMessages') || '[]');
                storedMessages.forEach(msg => {
                    this.displayMessage(msg.text, msg.type, msg.sender, msg.timestamp);
                });
            } catch (error) {
                console.error('Error loading saved messages:', error);
            }
        }
        displayMessage(message, type, sender = '', timestamp = null) {
            const messagesContainer = document.getElementById('chat-messages');
            if (!messagesContainer) return;
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}-message`;
            const time = timestamp ? new Date(timestamp) : new Date();
            const timeStr = time.toLocaleTimeString([], {
                hour: '2-digit',
                minute: '2-digit'
            });
            messageDiv.innerHTML = `<div class="message-content">${this.escapeHtml(message)}</div><div class="message-time">${timeStr}${sender && sender !== 'Guest' ? ` • ${sender}` : ''}</div>`;
            messagesContainer.appendChild(messageDiv);
            this.scrollToBottom();
        }
        showTypingIndicator(isTyping, senderName = 'Support') {
            const indicator = document.getElementById('typing-indicator');
            if (!indicator) return;
            const typingText = indicator.querySelector('.typing-text');
            if (isTyping) {
                typingText.textContent = `${senderName} is typing...`;
                indicator.style.display = 'flex';
            } else {
                indicator.style.display = 'none';
            }
            this.scrollToBottom();
        }
        toggleChat() {
            const chatWindow = document.getElementById('chat-window-enhanced');
            if (!chatWindow) return;
            chatWindow.classList.contains('open') ? this.closeChat() : this.openChat();
        }
        openChat() {
            const chatWindow = document.getElementById('chat-window-enhanced');
            const userInfo = document.getElementById('user-info');
            const chatInputArea = document.getElementById('chat-input-area');
            if (!chatWindow) return;
            chatWindow.style.display = 'flex';
            setTimeout(() => chatWindow.classList.add('open'), 10);
            if (!this.userName || this.userName === 'Guest') {
                userInfo.style.display = 'flex';
                chatInputArea.style.display = 'none';
            } else {
                userInfo.style.display = 'none';
                chatInputArea.style.display = 'flex';
            }
            if (!this.hasIdentified && this.isConnected) {
                this.sendIdentifyMessage();
            }
            this.clearUnreadCount();
            this.scrollToBottom();
        }
        closeChat() {
            const chatWindow = document.getElementById('chat-window-enhanced');
            if (!chatWindow) return;
            chatWindow.classList.remove('open');
            setTimeout(() => {
                chatWindow.style.display = 'none';
            }, 300);
        }
        minimizeChat() {
            this.closeChat();
        }
        saveUserInfoForm() {
            const nameInput = document.getElementById('user-name');
            const emailInput = document.getElementById('user-email');
            const name = nameInput.value.trim();
            const email = emailInput ? emailInput.value.trim() : '';
            if (!name) {
                nameInput.focus();
                nameInput.style.borderColor = '#ef4444';
                setTimeout(() => nameInput.style.borderColor = '', 3000);
                return;
            }
            this.userName = name;
            this.userEmail = email;
            localStorage.setItem('chatUserName', name);
            if (email) localStorage.setItem('chatUserEmail', email);
            document.getElementById('user-info').style.display = 'none';
            document.getElementById('chat-input-area').style.display = 'flex';
            this.sendIdentifyMessage();
            document.getElementById('chat-input-enhanced').focus();
        }
        sendMessage() {
            const chatInput = document.getElementById('chat-input-enhanced');
            if (!chatInput) return;
            const message = chatInput.value.trim();
            if (!message) return;
            chatInput.value = '';
            this.displayMessage(message, 'user', this.userName);
            this.saveMessageToStorage({
                text: message,
                type: 'user',
                sender: this.userName,
                timestamp: new Date().toISOString()
            });
            if (this.isConnected && this.ws && this.ws.readyState === WebSocket.OPEN) {
                this.ws.send(JSON.stringify({
                    type: 'chat',
                    text: message,
                    name: this.userName,
                    email: this.userEmail,
                    clientId: this.clientId,
                    timestamp: new Date().toISOString()
                }));
            }
            this.stopTyping();
        }
        handleTyping() {
            if (!this.isConnected) return;
            if (!this.isTyping) {
                this.isTyping = true;
                if (this.ws && this.ws.readyState === WebSocket.OPEN) {
                    this.ws.send(JSON.stringify({
                        type: 'typing',
                        isTyping: true,
                        clientId: this.clientId
                    }));
                }
            }
            if (this.typingTimeout) {
                clearTimeout(this.typingTimeout);
            }
            this.typingTimeout = setTimeout(() => {
                this.stopTyping();
            }, 1000);
        }
        stopTyping() {
            if (this.isTyping) {
                this.isTyping = false;
                if (this.ws && this.ws.readyState === WebSocket.OPEN) {
                    this.ws.send(JSON.stringify({
                        type: 'typing',
                        isTyping: false,
                        clientId: this.clientId
                    }));
                }
            }
        }
        scrollToBottom() {
            const messagesContainer = document.getElementById('chat-messages');
            if (messagesContainer) {
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }
        }
        incrementUnreadCount() {
            const chatWindow = document.getElementById('chat-window-enhanced');
            if (!chatWindow || chatWindow.classList.contains('open')) return;
            this.unreadCount++;
            this.updateUnreadBadge();
            localStorage.setItem('chat-unread-count', this.unreadCount.toString());
        }
        clearUnreadCount() {
            this.unreadCount = 0;
            this.updateUnreadBadge();
            localStorage.setItem('chat-unread-count', '0');
        }
        handleChatReset() {
            try {
                localStorage.removeItem('chatMessages');
                localStorage.removeItem('chat-unread-count');
                localStorage.removeItem('chatUserName');
                localStorage.removeItem('chatUserEmail');
                localStorage.removeItem('chatClientId');
            } catch (e) {}
            this.userName = 'Guest';
            this.userEmail = '';
            this.clearUnreadCount();
            const messagesContainer = document.getElementById('chat-messages');
            if (messagesContainer) {
                messagesContainer.innerHTML = '';
            }
            this.clientId = this.generateClientId();
            try {
                localStorage.setItem('chatClientId', this.clientId);
            } catch (e) {}
            this.displayMessage('Chat was reset. Please start a new conversation.', 'system', 'System', new Date().toISOString());
            if (this.ws && this.ws.readyState === WebSocket.OPEN) {
                try {
                    this.ws.close(4000, 'reset');
                } catch (e) {}
            } else {
                this.connectWebSocket();
            }
        }
        updateUnreadBadge() {
            const badge = document.getElementById('unread-badge');
            if (!badge) return;
            if (this.unreadCount > 0) {
                badge.textContent = this.unreadCount > 99 ? '99+' : this.unreadCount.toString();
                badge.style.display = 'flex';
            } else {
                badge.style.display = 'none';
            }
        }
        playNotificationSound() {
            try {
                const audioContext = new(window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gain = audioContext.createGain();
                oscillator.connect(gain);
                gain.connect(audioContext.destination);
                oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
                gain.gain.setValueAtTime(0.1, audioContext.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.2);
            } catch (error) {}
        }
        escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
    }
    document.addEventListener('DOMContentLoaded', function() {
        // --- Gemini API Checklist Feature ---
        const checklistModal = document.getElementById('checklist-modal');
        const checklistModalContent = document.getElementById('checklist-modal-content');
        const checklistModalTitle = document.getElementById('checklist-modal-title');
        const checklistModalClose = document.getElementById('checklist-modal-close');
        const checklistModalCloseBottom = document.getElementById('checklist-modal-close-bottom');
        const checklistModalDownload = document.getElementById('checklist-modal-download');
        const checklistLoader = document.getElementById('checklist-loader');
        const checklistContent = document.getElementById('checklist-content');
        const checklistError = document.getElementById('checklist-error');
        
        let currentChecklistText = "";

        const openChecklistModal = (serviceName) => {
            checklistModalTitle.textContent = `${serviceName} Checklist`;
            checklistContent.classList.add('hidden');
            checklistError.classList.add('hidden');
            checklistLoader.style.display = 'flex';
            checklistModalDownload.classList.add('hidden');
            checklistModal.classList.remove('hidden');
            setTimeout(() => checklistModal.classList.remove('opacity-0'), 10);
            setTimeout(() => checklistModalContent.classList.remove('scale-95'), 10);
            generateChecklist(serviceName);
        };

        const closeChecklistModal = () => {
            checklistModal.classList.add('opacity-0');
            checklistModalContent.classList.add('scale-95');
            setTimeout(() => checklistModal.classList.add('hidden'), 300);
        };

        const markdownToHtml = (markdown) => {
            let html = markdown
                .split('\n')
                .map(line => line.trim())
                .filter(line => line)
                .reduce((acc, line) => {
                    if (line.startsWith('## ')) {
                        acc += `<h4>${line.substring(3)}</h4>`;
                    } else if (line.startsWith('# ')) {
                        acc += `<h3>${line.substring(2)}</h3>`;
                    } else if (line.startsWith('* ') || line.startsWith('- ')) {
                        acc += `<li>${line.substring(2)}</li>`;
                    } else {
                        acc += `<p>${line}</p>`;
                    }
                    return acc;
                }, '');

            // Wrap list items in <ul> tags
            html = html.replace(/<li>/g, '<ul><li>').replace(/<\/li>/g, '</li></ul>');
            html = html.replace(/<\/ul><ul>/g, '');
            return html;
        };

        const generateChecklist = async (serviceName) => {
            // SECURITY FIX: API calls are now routed through our secure backend proxy.
            const apiUrl = '/api/gemini';
            
            const userQuery = `Act as a professional cleaning expert from AJK Cleaning Company. Generate a comprehensive cleaning checklist for a typical '${serviceName}' service. The checklist should be well-organized, easy to follow, and formatted in Markdown with headings (like '# Kitchen') and bullet points (like '* Wipe countertops').`;

            try {
                const payload = {
                    contents: [{ parts: [{ text: userQuery }] }]
                };

                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    const errorBody = await response.json().catch(() => ({ error: { message: 'Could not parse error response.' } }));
                    const errorMessage = errorBody?.error?.message || `API error: ${response.status} ${response.statusText}`;
                    throw new Error(errorMessage);
                }

                const result = await response.json();
                const text = result.candidates?.[0]?.content?.parts?.[0]?.text;
                
                if (text) {
                    currentChecklistText = text;
                    checklistContent.innerHTML = markdownToHtml(text);
                    checklistLoader.style.display = 'none';
                    checklistContent.classList.remove('hidden');
                    checklistModalDownload.classList.remove('hidden');
                } else {
                    throw new Error("No content received from Gemini API.");
                }

            } catch (error) {
                console.error("Gemini API call failed:", error.message);
                checklistLoader.style.display = 'none';
                checklistError.innerHTML = `Sorry, we couldn't generate the checklist. <br><small class="text-gray-500">Reason: ${error.message}</small>`;
                checklistError.classList.remove('hidden');
            }
        };
        
        document.querySelectorAll('.get-checklist-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const serviceCard = e.target.closest('.service-card');
                const serviceName = serviceCard.querySelector('h3').textContent;
                openChecklistModal(serviceName);
            });
        });

        checklistModalClose.addEventListener('click', closeChecklistModal);
        checklistModalCloseBottom.addEventListener('click', closeChecklistModal);
        checklistModal.addEventListener('click', (e) => {
            if (e.target === checklistModal) closeChecklistModal();
        });
        checklistModalDownload.addEventListener('click', () => {
             const blob = new Blob([currentChecklistText], { type: 'text/plain' });
             const url = URL.createObjectURL(blob);
             const a = document.createElement('a');
             const serviceName = checklistModalTitle.textContent.replace(' Checklist', '').toLowerCase().replace(/ /g, '_');
             a.href = url;
             a.download = `${serviceName}_checklist.txt`;
             document.body.appendChild(a);
             a.click();
             document.body.removeChild(a);
             URL.revokeObjectURL(url);
        });

        // --- End Gemini API Feature ---
        
        // --- AI Cleaning Tip Generator ---
        const generateTipBtn = document.getElementById('generate-tip-btn');
        const tipResultContainer = document.getElementById('tip-result-container');
        const tipResultLoader = document.getElementById('tip-result-loader');
        const tipResultText = document.getElementById('tip-result-text');

        generateTipBtn.addEventListener('click', async () => {
            const room = document.getElementById('tip-room').value;
            const challenge = document.getElementById('tip-challenge').value;

            tipResultContainer.classList.remove('hidden');
            setTimeout(() => tipResultContainer.classList.remove('opacity-0'), 10);
            tipResultText.classList.add('hidden');
            tipResultLoader.style.display = 'flex';
            
            // SECURITY FIX: API calls are now routed through our secure backend proxy.
            const apiUrl = '/api/gemini';
            const userQuery = `You are a friendly cleaning expert from AJK Cleaning Company in Germany. Provide a quick, eco-friendly cleaning tip for tackling "${challenge}" in a "${room}". Keep it under 50 words and make it easy to follow.`;

            try {
                 const payload = {
                    contents: [{ parts: [{ text: userQuery }] }]
                };

                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                
                if (!response.ok) {
                    const errorBody = await response.json().catch(() => ({ error: { message: 'Could not parse error response.' } }));
                    const errorMessage = errorBody?.error?.message || `API error: ${response.status} ${response.statusText}`;
                    throw new Error(errorMessage);
                }

                const result = await response.json();
                const text = result.candidates?.[0]?.content?.parts?.[0]?.text;

                if (text) {
                    tipResultLoader.style.display = 'none';
                    tipResultText.textContent = text;
                    tipResultText.classList.remove('hidden');
                } else {
                     throw new Error("No content received from Gemini API.");
                }

            } catch(error) {
                console.error("Gemini API call for tip failed:", error.message);
                tipResultLoader.style.display = 'none';
                tipResultText.innerHTML = `Sorry, we couldn't generate a tip. <br><small class="text-gray-500">Reason: ${error.message}</small>`;
                tipResultText.classList.remove('hidden');
            }
        });
        // --- End AI Cleaning Tip Generator ---

        const faqData = [{
            question: "What areas do you serve?",
            answer: "We proudly serve Bischofsheim, Ginsheim-Gustavsburg, Mainz, Wiesbaden, and surrounding communities within a 25km radius."
        }, {
            question: "Are you insured and bonded?",
            answer: "Yes, we are fully insured and bonded for your peace of mind. All our cleaning professionals are vetted and trained to the highest standards."
        }, {
            question: "Do you use eco-friendly products?",
            answer: "Absolutely. We prioritize the health of your family, pets, and our planet by using high-quality, eco-friendly cleaning products that are both safe and effective."
        }, {
            question: "How do I get a quote?",
            answer: "You can get a free, no-obligation quote by filling out the contact form on our website or by calling us directly at +49 176 61852286."
        }];
        const faqContainer = document.getElementById('faq-container');
        if (faqContainer) {
            faqData.forEach((item, index) => {
                const faqItem = document.createElement('div');
                faqItem.className = 'faq-item bg-white p-5 rounded-lg shadow-sm border border-gray-200 animate-fade-in-up';
                faqItem.style.animationDelay = `${0.3 + index * 0.1}s`;
                faqItem.innerHTML = `
                    <div class="faq-question flex justify-between items-center font-semibold text-gray-800">
                        <p>${item.question}</p>
                        <i class="fas fa-chevron-down faq-icon text-primary"></i>
                    </div>
                    <div class="faq-answer text-gray-600 pt-3">${item.answer}</div>`;
                faqContainer.appendChild(faqItem);
            });
            faqContainer.addEventListener('click', (e) => {
                const question = e.target.closest('.faq-question');
                if (question) {
                    question.parentElement.classList.toggle('open');
                }
            });
        }
        const menuBtn = document.getElementById('menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');
        if (menuBtn && mobileMenu) {
            menuBtn.addEventListener('click', () => {
                const isExpanded = menuBtn.getAttribute('aria-expanded') === 'true';
                mobileMenu.classList.toggle('open');
                menuBtn.classList.toggle('menu-open');
                menuBtn.setAttribute('aria-expanded', !isExpanded);
                mobileMenu.setAttribute('aria-hidden', isExpanded);
            });
            document.querySelectorAll('#mobile-menu a').forEach(link => {
                link.addEventListener('click', () => {
                    mobileMenu.classList.remove('open');
                    menuBtn.classList.remove('menu-open');
                    menuBtn.setAttribute('aria-expanded', 'false');
                    mobileMenu.setAttribute('aria-hidden', 'true');
                });
            });
        }
        const navbar = document.getElementById('navbar');
        const navLinks = document.querySelectorAll('.nav-link, #mobile-menu a');
        window.addEventListener('scroll', () => {
            window.scrollY > 50 ? navbar.classList.add('navbar-scrolled') : navbar.classList.remove('navbar-scrolled');
            let currentSection = "";
            document.querySelectorAll('section').forEach(section => {
                if (section.offsetTop <= window.scrollY + 150) {
                    currentSection = section.getAttribute('id');
                }
            });
            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href').substring(1) === currentSection) {
                    link.classList.add('active');
                }
            });
        });
        const contactForm = document.getElementById('contact-form');
        if (contactForm) {
            contactForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const nameInput = document.getElementById('name');
                const emailInput = document.getElementById('email');
                const messageInput = document.getElementById('message');
                const formSuccess = document.getElementById('form-success');
                const formError = document.getElementById('form-error');
                const submitBtn = document.getElementById('submit-btn');
                const submitText = document.getElementById('submit-text');
                const submitLoading = document.getElementById('submit-loading');
                let isValid = true;
                if (!nameInput.value.trim() || !emailInput.value.trim() || !messageInput.value.trim() || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(emailInput.value)) {
                    isValid = false;
                }
                if (isValid) {
                    submitText.classList.add('hidden');
                    submitLoading.classList.remove('hidden');
                    submitBtn.disabled = true;
                    try {
                        const formData = {
                            name: nameInput.value.trim(),
                            email: emailInput.value.trim(),
                            phone: document.getElementById('phone')?.value?.trim() || '',
                            service: document.getElementById('service')?.value || '',
                            message: messageInput.value.trim()
                        };
                        const response = await fetch('/api/form/submit', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify(formData)
                        });
                        if (!response.ok) {
                            const errorData = await response.json();
                            throw new Error(errorData.error || 'Submission failed');
                        }
                        formSuccess.classList.remove('hidden');
                        formError.classList.add('hidden');
                        contactForm.reset();
                        setTimeout(() => formSuccess.classList.add('hidden'), 5000);
                    } catch (error) {
                        formError.textContent = `Error: ${error.message}`;
                        formError.classList.remove('hidden');
                        setTimeout(() => formError.classList.add('hidden'), 5000);
                    } finally {
                        submitText.classList.remove('hidden');
                        submitLoading.classList.add('hidden');
                        submitBtn.disabled = false;
                    }
                } else {
                    formError.textContent = "Please fill out all required fields correctly.";
                    formError.classList.remove('hidden');
                    setTimeout(() => formError.classList.add('hidden'), 5000);
                }
            });
        }
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                    observer.unobserve(entry.target);
                }
            });
        }, {
            threshold: 0.1
        });
        document.querySelectorAll('.animate-fade-in-up').forEach(el => {
            observer.observe(el);
        });
        window.chatWidget = new ChatWidget();
    });
  </script>
</body>
</html>